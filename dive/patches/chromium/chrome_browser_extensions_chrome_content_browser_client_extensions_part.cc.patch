diff --git a/chrome/browser/extensions/chrome_content_browser_client_extensions_part.cc b/chrome/browser/extensions/chrome_content_browser_client_extensions_part.cc
index 643fd19bd3..d420e052e4 100644
--- a/chrome/browser/extensions/chrome_content_browser_client_extensions_part.cc
+++ b/chrome/browser/extensions/chrome_content_browser_client_extensions_part.cc
@@ -4,6 +4,9 @@

 #include "chrome/browser/extensions/chrome_content_browser_client_extensions_part.h"

+#include "content/browser/renderer_host/render_process_host_impl.h"
+#include "extensions/common/manifest_url_handlers.h"
+
 #include <stddef.h>

 #include <algorithm>
@@ -101,6 +104,7 @@ enum RenderProcessHostPrivilege {
   PRIV_EXTENSION,
 };

+#if 0
 RenderProcessHostPrivilege GetPrivilegeRequiredByUrl(
     const GURL& url,
     ExtensionRegistry* registry) {
@@ -124,6 +128,7 @@ RenderProcessHostPrivilege GetPrivilegeRequiredByUrl(
     return PRIV_HOSTED;
   return PRIV_EXTENSION;
 }
+#endif

 RenderProcessHostPrivilege GetProcessPrivilege(
     content::RenderProcessHost* process_host,
@@ -342,8 +347,12 @@ bool ChromeContentBrowserClientExtensionsPart::DoesSiteRequireDedicatedProcess(
   const Extension* extension = ExtensionRegistry::Get(browser_context)
                                    ->enabled_extensions()
                                    .GetExtensionOrAppByURL(effective_site_url);
-  // Isolate all extensions.
-  return extension != nullptr;
+  if (!extension)
+    return false;
+
+  if (extension->manifest()->FindKey("devtools_page"))
+    return true;
+  return false;
 }

 // static
@@ -396,6 +405,9 @@ bool ChromeContentBrowserClientExtensionsPart::CanCommitURL(
   if (extension->is_hosted_app())
     return extension->id() != kWebStoreAppId;

+  if (extension->is_nwjs_app()) //NWJS#6784
+    return true;
+
   // Platform app URLs may commit in their own guest processes, when they have
   // the webview permission.  (Some extensions are allowlisted for webviews as
   // well, but their pages load in their own extension process and are allowed
@@ -408,6 +420,8 @@ bool ChromeContentBrowserClientExtensionsPart::CanCommitURL(
     bool found_owner = WebViewRendererState::GetInstance()->GetOwnerInfo(
         process_host->GetID(), &owner_process_id, &owner_extension_id);
     DCHECK(found_owner);
+    if (!extensions::ManifestURL::Get(extension, "devtools_page").is_empty())
+      return true;
     return extension->is_platform_app() &&
            extension->permissions_data()->HasAPIPermission(
                extensions::mojom::APIPermissionID::kWebView) &&
@@ -423,6 +437,8 @@ bool ChromeContentBrowserClientExtensionsPart::IsSuitableHost(
     Profile* profile,
     content::RenderProcessHost* process_host,
     const GURL& site_url) {
+  return true;
+#if 0
   DCHECK(profile);

   ExtensionRegistry* registry = ExtensionRegistry::Get(profile);
@@ -439,6 +455,7 @@ bool ChromeContentBrowserClientExtensionsPart::IsSuitableHost(
       GetPrivilegeRequiredByUrl(site_url, registry);
   return GetProcessPrivilege(process_host, process_map, registry) ==
          privilege_required;
+#endif
 }

 size_t
@@ -634,6 +651,8 @@ void ChromeContentBrowserClientExtensionsPart::SiteInstanceGotProcess(
   if (!extension)
     return;

+  if (extension->is_nwjs_app() && !content::RenderProcessHostImpl::main_host())
+    ((content::RenderProcessHostImpl*)site_instance->GetProcess())->set_main_host();
   // Don't consider guests that load extension URLs as extension processes.
   // This is possible when an embedder app navigates <webview> to a
   // webview-accessible app resource; the resulting <webview> process shouldn't
