diff --git a/third_party/blink/renderer/core/page/create_window.cc b/third_party/blink/renderer/core/page/create_window.cc
index 7e73ad64a9..01d48bc56a 100644
--- a/third_party/blink/renderer/core/page/create_window.cc
+++ b/third_party/blink/renderer/core/page/create_window.cc
@@ -56,6 +56,8 @@
 #include "third_party/blink/renderer/platform/wtf/text/string_to_number.h"
 #include "third_party/blink/renderer/platform/wtf/text/string_view.h"

+#include "third_party/blink/renderer/core/frame/local_frame_client.h"
+
 namespace blink {

 // Though isspace() considers \t and \v to be whitespace, Win IE doesn't when
@@ -280,11 +282,11 @@ static void MaybeLogWindowOpen(LocalFrame& opener_frame) {

 Frame* CreateNewWindow(LocalFrame& opener_frame,
                        FrameLoadRequest& request,
-                       const AtomicString& frame_name) {
+                       const AtomicString& frame_name, WebString* manifest) {
   LocalDOMWindow& opener_window = *opener_frame.DomWindow();
   DCHECK(request.GetResourceRequest().RequestorOrigin() ||
          opener_window.Url().IsEmpty());
-  DCHECK_EQ(kNavigationPolicyCurrentTab, request.GetNavigationPolicy());
+  //DCHECK_EQ(kNavigationPolicyCurrentTab, request.GetNavigationPolicy());

   if (opener_window.document()->PageDismissalEventBeingDispatched() !=
       Document::kNoDismissal) {
@@ -355,10 +357,13 @@ Frame* CreateNewWindow(LocalFrame& opener_frame,
                                                        new_namespace_id);
   }

+  WebString manifest_str("");
+  if (manifest)
+    manifest_str = (*manifest);
   bool consumed_user_gesture = false;
   Page* page = old_page->GetChromeClient().CreateWindow(
       &opener_frame, request, frame_name, features, sandbox_flags,
-      new_namespace_id, consumed_user_gesture);
+      new_namespace_id, consumed_user_gesture, &manifest_str);
   if (!page)
     return nullptr;

@@ -390,7 +395,7 @@ Frame* CreateNewWindow(LocalFrame& opener_frame,

   page->GetChromeClient().Show(frame, opener_frame,
                                request.GetNavigationPolicy(), window_rect,
-                               consumed_user_gesture);
+                               consumed_user_gesture, &manifest_str);
   MaybeLogWindowOpen(opener_frame);
   return &frame;
 }
